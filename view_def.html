<h1>Definición de vista_personal_completo</h1><pre>Array
(
    [View] => vista_personal_completo
    [Create View] => CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vista_personal_completo` AS select `p`.`id` AS `id`,`p`.`empresa_id` AS `empresa_id`,`p`.`sucursal_id` AS `sucursal_id`,`p`.`codigo_empleado` AS `codigo_empleado`,`p`.`nombres` AS `nombres`,`p`.`apellidos` AS `apellidos`,`p`.`cedula` AS `cedula`,`p`.`fecha_nacimiento` AS `fecha_nacimiento`,`p`.`genero` AS `genero`,`p`.`estado_civil` AS `estado_civil`,`p`.`telefono` AS `telefono`,`p`.`telefono_emergencia` AS `telefono_emergencia`,`p`.`email` AS `email`,`p`.`direccion` AS `direccion`,`p`.`ciudad` AS `ciudad`,`p`.`pais` AS `pais`,`p`.`cargo` AS `cargo`,`p`.`departamento` AS `departamento`,`p`.`fecha_ingreso` AS `fecha_ingreso`,`p`.`fecha_salida` AS `fecha_salida`,`p`.`tipo_contrato` AS `tipo_contrato`,`p`.`salario` AS `salario`,`p`.`usuario_sistema_id` AS `usuario_sistema_id`,`p`.`estado` AS `estado`,`p`.`foto_url` AS `foto_url`,`p`.`notas` AS `notas`,`p`.`creado_por` AS `creado_por`,`p`.`fecha_creacion` AS `fecha_creacion`,`p`.`modificado_por` AS `modificado_por`,`p`.`fecha_modificacion` AS `fecha_modificacion`,`e`.`nombre` AS `empresa_nombre`,`e`.`codigo` AS `empresa_codigo`,`s`.`nombre` AS `sucursal_nombre`,`s`.`codigo` AS `sucursal_codigo`,`s`.`ciudad` AS `sucursal_ciudad`,`s`.`pais` AS `sucursal_pais`,`u`.`nombre_completo` AS `usuario_sistema_nombre`,case when `p`.`fecha_salida` is null then timestampdiff(YEAR,`p`.`fecha_ingreso`,curdate()) else timestampdiff(YEAR,`p`.`fecha_ingreso`,`p`.`fecha_salida`) end AS `anos_servicio` from (((`personal` `p` left join `empresas` `e` on(`p`.`empresa_id` = `e`.`id`)) left join `sucursales` `s` on(`p`.`sucursal_id` = `s`.`id`)) left join `usuarios` `u` on(`p`.`usuario_sistema_id` = `u`.`id`))
    [character_set_client] => utf8mb4
    [collation_connection] => utf8mb4_general_ci
)
</pre><h2>SQL para Producción:</h2><textarea rows='20' cols='100'>CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vista_personal_completo` AS select `p`.`id` AS `id`,`p`.`empresa_id` AS `empresa_id`,`p`.`sucursal_id` AS `sucursal_id`,`p`.`codigo_empleado` AS `codigo_empleado`,`p`.`nombres` AS `nombres`,`p`.`apellidos` AS `apellidos`,`p`.`cedula` AS `cedula`,`p`.`fecha_nacimiento` AS `fecha_nacimiento`,`p`.`genero` AS `genero`,`p`.`estado_civil` AS `estado_civil`,`p`.`telefono` AS `telefono`,`p`.`telefono_emergencia` AS `telefono_emergencia`,`p`.`email` AS `email`,`p`.`direccion` AS `direccion`,`p`.`ciudad` AS `ciudad`,`p`.`pais` AS `pais`,`p`.`cargo` AS `cargo`,`p`.`departamento` AS `departamento`,`p`.`fecha_ingreso` AS `fecha_ingreso`,`p`.`fecha_salida` AS `fecha_salida`,`p`.`tipo_contrato` AS `tipo_contrato`,`p`.`salario` AS `salario`,`p`.`usuario_sistema_id` AS `usuario_sistema_id`,`p`.`estado` AS `estado`,`p`.`foto_url` AS `foto_url`,`p`.`notas` AS `notas`,`p`.`creado_por` AS `creado_por`,`p`.`fecha_creacion` AS `fecha_creacion`,`p`.`modificado_por` AS `modificado_por`,`p`.`fecha_modificacion` AS `fecha_modificacion`,`e`.`nombre` AS `empresa_nombre`,`e`.`codigo` AS `empresa_codigo`,`s`.`nombre` AS `sucursal_nombre`,`s`.`codigo` AS `sucursal_codigo`,`s`.`ciudad` AS `sucursal_ciudad`,`s`.`pais` AS `sucursal_pais`,`u`.`nombre_completo` AS `usuario_sistema_nombre`,case when `p`.`fecha_salida` is null then timestampdiff(YEAR,`p`.`fecha_ingreso`,curdate()) else timestampdiff(YEAR,`p`.`fecha_ingreso`,`p`.`fecha_salida`) end AS `anos_servicio` from (((`personal` `p` left join `empresas` `e` on(`p`.`empresa_id` = `e`.`id`)) left join `sucursales` `s` on(`p`.`sucursal_id` = `s`.`id`)) left join `usuarios` `u` on(`p`.`usuario_sistema_id` = `u`.`id`))</textarea>